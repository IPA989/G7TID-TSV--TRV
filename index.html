<!Doctype html>
<html>
    <head>
        <title>G7TID/TSV->TRV</title>
    </head>
    <body>
        <form class="TRV_form">
            G7TID : 
            <input type="number" class="box" name="g7tid">
            <br>
            TSV : 
            <input type="number" class="box" name="tsv">
            <br>
            <input type="button" class="calc_button" onclick="calc(g7tid.value, tsv.value);" value="search">
            <br>
        </form>


        <script>
            function calc(g7tid, tsv){
                var flg = false;
                var g7tid = Number(g7tid);
                var tsv = Number(tsv);
                var tid = Number();
                var sid = Number();
                var Result = "";

                document.write("G7TID : "+g7tid+", TSV : "+tsv+"<br>");
                
                for(var i=0; i<4295; i++){
                    sid = Math.floor( (g7tid + 1000000*i) / 65536 );
                    tid = Math.floor( (g7tid + 1000000*i) - sid * 65536 );
                    if(tsv == Math.floor( (tid ^ sid) / 16)){
                        flg = true;
                        trv = (tid ^ sid) % 16;
                        document.write("TRV :"+trv+", TID : "+tid+", SID : "+sid+"<br>");
                    }
                }

                if(!flg){
                    document.write("TRV not found<br>");
                }
                document.write("Search end<br>");

            }
        </script>
    </body>
</html>
